CREATE TABLE fees (id INT AUTO_INCREMENT NOT NULL, trustee_id INT DEFAULT NULL, vat_id INT DEFAULT NULL, address LONGTEXT NOT NULL, prelabel LONGTEXT DEFAULT NULL, frequence INT NOT NULL, INDEX IDX_A093C16CAFD45F7C (trustee_id), INDEX IDX_A093C16CB5B63A6B (vat_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE fees_contracts (fee_id INT NOT NULL, contract_id INT NOT NULL, INDEX IDX_C60F9BE7AB45AECA (fee_id), INDEX IDX_C60F9BE72576E0FD (contract_id), PRIMARY KEY(fee_id, contract_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE bill_lines (id INT AUTO_INCREMENT NOT NULL, product_id INT DEFAULT NULL, bill_id INT DEFAULT NULL, position SMALLINT DEFAULT NULL, reference VARCHAR(255) DEFAULT NULL, designation VARCHAR(255) NOT NULL, description LONGTEXT DEFAULT NULL, show_description TINYINT(1) DEFAULT NULL, is_transmitter TINYINT(1) DEFAULT NULL, quantity INT NOT NULL, unit_price NUMERIC(10, 2) NOT NULL, discount NUMERIC(10, 7) NOT NULL, vat NUMERIC(3, 3) NOT NULL, INDEX IDX_79F1D9084584665A (product_id), INDEX IDX_79F1D9081A8C12F5 (bill_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE fees_follower (id INT AUTO_INCREMENT NOT NULL, activation DATETIME NOT NULL, generation DATETIME DEFAULT NULL, frequence1 NUMERIC(3, 3) DEFAULT NULL, frequence2 NUMERIC(3, 3) DEFAULT NULL, frequence4 NUMERIC(3, 3) DEFAULT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE fees ADD CONSTRAINT FK_A093C16CAFD45F7C FOREIGN KEY (trustee_id) REFERENCES trustees (id);
ALTER TABLE fees ADD CONSTRAINT FK_A093C16CB5B63A6B FOREIGN KEY (vat_id) REFERENCES vat (id);
ALTER TABLE fees_contracts ADD CONSTRAINT FK_C60F9BE7AB45AECA FOREIGN KEY (fee_id) REFERENCES fees (id);
ALTER TABLE fees_contracts ADD CONSTRAINT FK_C60F9BE72576E0FD FOREIGN KEY (contract_id) REFERENCES contracts (id);
ALTER TABLE bill_lines ADD CONSTRAINT FK_79F1D9084584665A FOREIGN KEY (product_id) REFERENCES products (id);
ALTER TABLE bill_lines ADD CONSTRAINT FK_79F1D9081A8C12F5 FOREIGN KEY (bill_id) REFERENCES bill (id);
ALTER TABLE bill DROP FOREIGN KEY FK_7A2119E358639EAE;
DROP INDEX IDX_7A2119E358639EAE ON bill;
ALTER TABLE bill ADD vat NUMERIC(3, 3) NOT NULL, ADD vat_transmitter NUMERIC(3, 3) NOT NULL, ADD accountNumber VARCHAR(255) NOT NULL, ADD state SMALLINT NOT NULL, ADD property VARCHAR(255) DEFAULT NULL, ADD earlyPayment VARCHAR(255) NOT NULL, ADD penalty VARCHAR(255) NOT NULL, ADD maturity DATE NOT NULL, ADD discount NUMERIC(10, 7) NOT NULL, CHANGE door_id feesFollower_id INT DEFAULT NULL, CHANGE door_cp intro LONGTEXT NOT NULL;
ALTER TABLE bill ADD fee_id INT DEFAULT NULL, ADD prelabel LONGTEXT NOT NULL, ADD reference LONGTEXT NOT NULL, ADD details LONGTEXT NOT NULL, ADD site LONGTEXT NOT NULL;
ALTER TABLE bill ADD CONSTRAINT FK_7A2119E3AB45AECA FOREIGN KEY (fee_id) REFERENCES fees (id);
ALTER TABLE bill ADD CONSTRAINT FK_7A2119E3BE5E8F93 FOREIGN KEY (feesFollower_id) REFERENCES fees_follower (id);
CREATE INDEX IDX_7A2119E3AB45AECA ON bill (fee_id);
CREATE INDEX IDX_7A2119E3BE5E8F93 ON bill (feesFollower_id)
ALTER TABLE bill CHANGE intro intro LONGTEXT DEFAULT NULL
ALTER TABLE bill CHANGE maturity maturity DATE DEFAULT NULL
ALTER TABLE bill CHANGE prelabel prelabel LONGTEXT DEFAULT NULL
