{% extends "::base.html.twig" %}

{% block title %}JLM{% endblock %}

{% block stylesheets %}
	<link rel="stylesheet" href="{{ asset('bundles/jlmoffice/css/bootstrap.min.css') }}" type="text/css">
	<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" type="text/css">
	<link rel="stylesheet" href="{{ asset('bundles/jlmoffice/css/style.css') }}" type="text/css">
{% endblock %}

{% block body %}
    <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
	        <div class="container">
	      {% block header %}
	      {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
	      	<a href="#" class="brand">JLM</a>
			<ul class="nav">
			  {% block navigation %}
			    <li><a href="{{ path('trustee') }}">Saisie</a></li>
		        <li class="dropdown">
		        	<a href="#" class="dropdown-toggle" data-toggle="dropdown">Bureau <b class="caret"></b></a>
		        	<ul class="dropdown-menu">
		        		<li class="dropdown-submenu">
		        			<a tabindex="-1" href="{{ path('task') }}">Tâches</a>
		        			<ul class="dropdown-menu">
		        				<li><a href="{{ path('task_new') }}"><i class="icon-plus-sign"></i> Nouvelle tâche</a></li>
		        				<li class="divider"></li>
		        				{% render "JLMOfficeBundle:Task:sidebar" %}
		        			</ul>
		        		</li>
                        <li class="dropdown-submenu">
		        			<a tabindex="-1" href="{{ path('quote') }}">Devis</a>
		        			<ul class="dropdown-menu">
		        				<li><a href="{{ path('quote_new') }}"><i class="icon-plus-sign"></i> Nouveau devis</a></li>
		        				<li class="divider"></li>
		        				{% render "JLMOfficeBundle:Quote:sidebar" %}
		        			</ul>
		        		</li>
		        		<li class="dropdown-submenu">
		        			<a tabindex="-1" href="{{ path('order') }}">Fiches travaux</a>
		        			<ul class="dropdown-menu">
		        				<li><a href="{{ path('order_new') }}"><i class="icon-plus-sign"></i> Nouvelle fiche</a></li>
								<li class="divider"></li>
				        		{% render "JLMOfficeBundle:Order:sidebar" %} 
		        			</ul>
		        		</li>
                        <li class="dropdown-submenu">
		        			<a tabindex="-1" href="{{ path('bill') }}">Facture</a>
		        			<ul class="dropdown-menu">
				        		<li><a href="{{ path('bill_new') }}"><i class="icon-plus-sign"></i> Nouvelle facture</a></li>
				        		<li class="divider"></li>
				        		{% render "JLMOfficeBundle:Bill:sidebar" %}
		        			</ul>
		        		</li>
                        <li class="dropdown-submenu">
		        			<a tabindex="-1" href="{{ path('fees') }}">Redevances</a>
		        			<ul class="dropdown-menu">
		        				<li><a href="{{ path('fees') }}"><i class="icon-list"></i> Liste</a></li>
		        			</ul>
		        		</li>
		        	</ul>
		        </li>
		        <li><a href="{{ path('fixing_list') }}">Journal de bord</a></li>
			  {% endblock navigation %}
			</ul>
			<div class="btn-group pull-right">
			   <a href="#" class="btn btn-info dropdown-toggle" data-toggle="dropdown"><i class="icon-user  icon-white"></i> {{ app.user.person.firstName }} <b class="caret"></b></a>
			   <ul class="dropdown-menu">
			   		<li><a href="{{ path('fos_user_security_logout') }}"><i class="icon-remove-sign"></i> Déconnexion</a></li>
			   		<li class="divider"></li>
			   		<li><a href="{{ path('fos_user_profile_show') }}"><i class="icon-user"></i> Mon profil</a></li>
			   		<li><a href="{{ path('fos_user_change_password') }}"><i class="icon-lock"></i> Changer mon mot de passe</a></li>  		
			   </ul>
			</div>
			{% else %}
			<div class="btn-group pull-right"><a href="{{ path('fos_user_security_login') }}" class="btn">Se connecter</a></div>
			{% endif %}	
	      {% endblock header %}
	          </div>
	      </div>
      </div>   
      <div class="container-fluid">
		  {% block container %}
		  {% endblock container %}
      </div>
      <footer>
          {% block footer %}
          {% endblock footer %}
      </footer>
{% endblock body%}

{% block javascripts %}
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
    <script src="{{ asset("bundles/jlmoffice/js/bootstrap.js") }}"></script>
    <script src="{{ asset("bundles/jlmoffice/js/jquery.ui.datepicker-fr.js") }}"></script>
    <script src="{{ asset("bundles/jlmoffice/js/number_format.js") }}"></script>
<script>
$('.autocompletion').autocomplete({
	source : function(request,response){
		return $.post(
			this.element.attr('data-source'),
			request, 
			function (data) { response(data);},
			'json'
		);
    },
    items:12,
});
{# Autocompletion dans une modal #}
$('.ui-autocomplete').css('z-index','1050');
$('.datepicker').datepicker({
	dateFormat:'dd/mm/yy',
});
$('.datepicker').datepicker( "option",
        $.datepicker.regional[ "fr" ] );
</script>
{% endblock javascripts %}
