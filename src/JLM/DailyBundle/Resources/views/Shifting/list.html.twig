{# JLMDailyBundle:Shifting:list.html.twig #}
{% extends "JLMDailyBundle::layout.html.twig" %}

{% block content %}
<h1>Déplacements de {{ technician }}</h1>
<table class="table table-stripped">
	<thead>
		<tr>
			<th>Type</th>
			<th>Lieu</th>
			<th>Raison</th>
			<th>Date</th>
			<th>Début</th>
			<th>Fin</th>
			<th>Temps</th>
		</tr>
	</thead>
	<tbody>
	{% for shifting in shiftings %}
		<tr>
			<td>{% include "JLMDailyBundle:Intervention:type.html.twig" with {'type' : shifting.shifting.type} %}</td>
			<td>{{ shifting.shifting.place | nl2br}}</td>
			<td>{{ shifting.shifting.reason | nl2br}}</td>
			<td>{{ shifting.begin | date('d/m/Y')}}</td>
			<td>{% if shifting.begin | date('Hi') != '0000' %}{{ shifting.begin | date('H:i')}}{% endif %}</td>
			<td>{% if shifting.end %}{{ shifting.end | date('H:i')}}{% endif %}</td>
			<td>{% if shifting.time %}{{ shifting.time.format('%hh%I') }}{% endif %}</td>
			<td><a href="#modalEditTech{{ shifting.id }}" data-toggle="modal" role="button" class="btn btn-warning"><i class="icon-wrench icon-white"></i></a>
				{% render 'JLMDailyBundle:Shifting:edit' with {'id':shifting.id} %}</td>
		</tr>
	{% endfor %}
	</tbody>
</table>

<div class="pagination pagination-centered">
	<ul>
	    <li{% if page == 1 %} class="disabled"{% endif %}><a href="{{ path('shifting_list_page',{ 'id':technician.id ,'page' : page-1 }) }}">«</a></li>
		{% for p in range(1,nbPages) %}
		<li{% if p == page %} class="active"{% endif %}><a href="{{ path('shifting_list_page',{ 'id':technician.id , 'page' : p }) }}">{{ p }}</a></li>
		{% endfor %}
		<li{% if page == nbPages %} class="disabled"{% endif %}><a href="{{ path('shifting_list_page',{ 'id':technician.id , 'page' : page+1 }) }}">»</a></li>
	</ul>
</div>
{% endblock %}